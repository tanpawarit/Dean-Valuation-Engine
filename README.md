# Dean's Valuation Engine: AI-Powered Investment Analysis System

[![Python 3.10+](https://img.shields.io/badge/Python-3.10+-blue.svg)](https://www.python.org/downloads/)  
[![LangChain](https://img.shields.io/badge/LangChain-Framework-green)](https://github.com/langchain-ai/langchain)  
[![LangGraph](https://img.shields.io/badge/LangGraph-Framework-purple)](https://github.com/langchain-ai/langgraph)  
[![OpenAI](https://img.shields.io/badge/OpenAI-GPT--4-orange)](https://openai.com/)  

---

## Overview: Dean's Valuation Engine üöÄ

> **Dean's Valuation Engine** is your intelligent partner in financial and business analysis. Leveraging advanced LLMs, it delivers comprehensive company insights and market analysis in minutes, not days.
>
> Built upon the renowned **Damodaran Valuation Framework**, it combines rigorous quantitative assessment with compelling business narratives. It doesn‚Äôt just crunch numbers ‚Äî it crafts the story behind them.
>
> The name pays homage to Professor Aswath Damodaran, the **‚ÄúDean of Valuation‚Äù**, reflecting the system‚Äôs foundation in his esteemed methodologies and its commitment to excellence in financial analysis.

---

## üìö Table of Contents

- [‚ú® Features](#features)
- [üìù Sample Analysis Output](#sample-analysis-output)
- [üèóÔ∏è System Architecture](#system-architecture)
- [üî¨ Technical Deep Dive](#technical-deep-dive)
- [üõ°Ô∏è Logging & Guardrails](#logging-guardrails)
- [‚öôÔ∏è Installation](#installation)
- [üìÑ License](#license)

---

## ‚ú® Features

- **ü§ñ Symphony of Specialized Agents**: Imagine a dream team of AI analysts! Each agent is a master of its domain (business models, financial health, market trends), collaborating to provide a holistic view.
- **üìà Dynamic Graph-Powered Orchestration**: No rigid scripts here! Analyst Robot uses a flexible, graph-based system (LangGraph) to plan and execute complex analyses dynamically, adapting to the unique needs of each query.
- **üéØ Pinpoint Analysis Capabilities**:
    - **Business Model & Market Sizing Mastery**: Uncover the DNA of a company's success and its true market potential.
    - **Financial X-Ray Vision**: Deep dive into financial statements to assess strength, stability, and future outlook.
    - **Insight Synthesis Engine**: Transforms raw data and individual findings into coherent, actionable intelligence.
- **üåê Real-Time Web Intelligence**: Stale data? Not on our watch! Integrated web search (via Serper API) ensures your analysis is fueled by the latest information.
- **üõ°Ô∏è Rock-Solid & Type-Safe**: Built with Python and meticulous type-hinting, ensuring robustness, maintainability, and fewer surprises.
- **‚úçÔ∏è Detailed Execution Logging**: Transparent and detailed logging of every step in the analysis graph, perfect for understanding, debugging, and auditing. (Thanks, `src/utils/graph_logger.py`!)


---

## üìù Sample Analysis Output

Here's an example of a synthesized report generated by Dean's Valuation Engine for "Company X", combining business model insights, financial health assessment, and market trends.

<details>
<summary><strong>=======> üìä Click to view the full analysis report for Company X <=======</strong></summary>

**query:** "analyst the company's business model of UBER, revenue breakdown, financial strength and highlight key growth opportunities."

**report:** 
## Comprehensive Analysis of Uber's Business Model, Financial Strength, and Growth Opportunities

### Overview of Uber's Business Model

Uber operates as a multi-sided platform, offering a range of services that include Mobility (ride-hailing, car rentals), Delivery (Uber Eats for food and groceries), Freight (Uber Freight for logistics), and ancillary services such as Uber for Business and Uber Health. This marketplace model connects various stakeholders like riders, drivers, eaters, couriers, and shippers, leveraging network effects to enhance scale and defensibility. Uber's asset-light approach, which avoids owning vehicles or restaurants, facilitates rapid expansion and margin leverage. However, the company faces risks from regulatory changes, driver classification issues, and competitive pricing pressures, particularly in the Delivery and Freight sectors. Despite these challenges, Uber's diversification across segments and geographies helps mitigate some cyclical risks, although it also exposes the company to local regulatory and economic shocks [Sources: Uber 2024 Annual Report, Uber Investor Update Feb 2024, Statista].

### Revenue Breakdown and Consistency

Uber's revenue is primarily derived from three segments: Mobility (~57% of total revenue), Delivery (~33%), and Freight (~10%), with other services contributing less than 1%. Mobility remains the most profitable segment, boasting a 76% market share in the US ride-hailing market as of March 2024. Delivery, while lower margin, is growing steadily and provides diversification. Freight, although currently loss-making, offers long-term potential. Uber's revenue is moderately cyclical, with Mobility being the most sensitive to economic cycles and seasonality. Delivery shows some counter-cyclical traits, while Freight is highly cyclical, tied to broader logistics trends. The lack of long-term contracts in core segments increases forecasting uncertainty, but high-frequency usage and global diversification help smooth volatility [Sources: Statista, Uber Q4 2024 Earnings, Investopedia].

### Financial Strength

#### Debt-to-Equity (D/E) Ratio
Uber's D/E ratio as of Q4 2024 is between 0.43 and 0.51, a significant improvement from its 12-month average of 0.65. This reduction in leverage indicates a deliberate effort to strengthen the balance sheet, supported by strong free cash flow and debt repayments. This level of leverage is sustainable given Uber's asset-light, cash-generative business model [Sources: GuruFocus, FinanceCharts].

#### Liquidity Ratios
Uber's current ratio ranges from 0.94 to 1.19, and its quick ratio from 0.66 to 0.8, both below the ideal threshold for tech companies. This suggests a relatively tight liquidity position, although Uber's strong cash generation mitigates short-term liquidity risks [Sources: Futunn, ReadyRatios, CSIMarket, Finbox].

#### Free Cash Flow (FCF) and Margin
Uber's FCF reached $1.7 billion in Q4 2024, with a trailing twelve-month FCF of $6.9 billion. The FCF margin stands at 14.3%, which is strong for a platform company. This robust cash generation supports Uber's ability to repay debt, invest in growth, and potentially return capital to shareholders [Sources: TradingView, Uber Q4 2024 Prepared Remarks PDF, StockStory, GoThematic].

### Growth Potential

#### Historical Growth Trends
Uber's revenue has grown at a CAGR of approximately 40.7% from 2020 to 2024, with a significant recovery post-pandemic. EPS turned positive in 2022, with a dramatic increase to $4.56 in 2024, partly due to a $6.4 billion tax benefit. FCF has also improved dramatically, with a consistent upward trend since 2021 [Sources: Uber Investor Relations, Macrotrends, Yahoo Finance].

#### Growth Stock Characteristics
Uber's growth metrics, including a revenue CAGR above 40%, position it as a growth stock. The company's valuation is driven by expectations of continued expansion, innovation, and market share gains [Sources: Uber Investor Relations, Macrotrends, Yahoo Finance].

#### Quality of Earnings
Uber's earnings quality is strong, with FCF growth supporting the reported earnings improvement. The 2024 EPS spike is partly non-recurring, but the underlying cash generation trend is robust and sustainable [Sources: Uber Investor Relations, Macrotrends, Yahoo Finance].

### Key Growth Opportunities

Uber's significant headroom for growth is evident in its small fraction of the serviceable available market (SAM) and total addressable market (TAM). Expansion into adjacent verticals such as groceries, healthcare logistics, and advertising, along with deeper penetration in emerging markets, are logical next steps. Success in these areas will require continued investment in technology, local partnerships, and regulatory navigation. Freight remains a long-term bet, with potential for scale but high competition and thin margins [Sources: Statista, McKinsey, Uber 2024 Investor Update, Gartner, GlobeNewswire].

### Conclusion

Uber's business model, financial strength, and growth potential position it as a leading player in the ride-hailing, delivery, and logistics markets. While the company faces challenges from regulatory and competitive pressures, its asset-light model, strong cash generation, and strategic diversification provide a solid foundation for future growth. Investors should be aware of the inherent volatility and high expectations associated with Uber's growth stock status, but the company's robust financial metrics and strategic opportunities suggest a promising outlook.

### References

1. [Uber 2024 Annual Report (10-K)](https://www.sec.gov/Archives/edgar/data/1543151/000154315125000008/uber-20241231.htm)
2. [Uber Investor Update Feb 2024 (PDF)](https://s23.q4cdn.com/407969754/files/doc_events/2024/Feb/14/uber-investor-update.pdf)
3. [Statista: Uber Revenue by Segment](https://www.statista.com/statistics/1173919/uber-global-net-revenue-segment/)
4. [Business of Apps: Uber Revenue and Usage Statistics (2025)](https://www.businessofapps.com/data/uber-statistics/)
5. [GuruFocus: Uber Debt-to-Equity](https://www.gurufocus.com/term/debt-to-equity/UBER)
6. [CSIMarket: Uber Quick Ratio](https://csimarket.com/stocks/singleFinancialStrength.php?code=UBER&Qr)
7. [StockStory: Uber FCF Margin](https://stockstory.org/stocks/nyse/uber)
8. [TradingView: Uber Q4 2024 Results](https://www.tradingview.com/news/tradingview:6167b26fcb52e:0-uber-technologies-inc-q4-and-full-year-2024-financial-results/)
9. [ReadyRatios: Uber Liquidity](https://www.readyratios.com/sec/UBER_uber-technologies-inc?type=quarterly)
10. [Macrotrends: Uber EPS, FCF, Net Income](https://www.macrotrends.net/stocks/charts/UBER/uber-technologies/)
11. [Yahoo Finance: Uber Income Statement](https://finance.yahoo.com/quote/UBER/financials/)
12. [FinanceCharts: Uber ROIC, FCF](https://www.financecharts.com/stocks/UBER/value/roic)
13. [Finbox: Uber CapEx, R&D](https://finbox.com/NYSE:UBER/explorer/rd_exp/)
14. [SEC 10-K Filings](https://www.sec.gov/Archives/edgar/data/1543151/000154315125000008/uber-20241231.htm)
</details>


---

## üèóÔ∏è System Architecture

Dean's Valuation Engine isn't just a program; it's a sophisticated ecosystem of intelligent agents working in concert, orchestrated by a dynamic graph-based workflow.

---

Here's a glimpse into its inner workings:

```
dean_valuation_engine/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ agents/                 # üß† The Brains: Specialized AI Agents
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ planner_agent.py    # üó∫Ô∏è The Master Orchestrator
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ specialize_agent/   # üïµÔ∏è‚Äç‚ôÇÔ∏è Domain Experts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ other_agent/        # üß© Utility Agents
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ registry.py         # üìö Agent Directory
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ constant.py         # ‚öôÔ∏è Agent Config
‚îÇ   ‚îú‚îÄ‚îÄ graph_nodes/            # üîó The Workflow Engine
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ graph_builder.py    # üèóÔ∏è The Architect
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ graph_state.py      # üíæ Shared Memory
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ nodes/              # üß© Action Blocks
‚îÇ   ‚îú‚îÄ‚îÄ tools/                  # üõ†Ô∏è The Toolkit
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ search_tools.py     # üåê Web Intelligence
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ web_loader_tools.py # üìÑ Content Fetchers
‚îÇ   ‚îú‚îÄ‚îÄ utils/                  # üîß Utility Belt
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config_manager.py   # üîë Secrets & Settings
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ graph_logger.py     # üìä Execution Insights
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.py           # üìù General Scribe
‚îÇ   ‚îú‚îÄ‚îÄ guardrails/             # üõ°Ô∏è Ethical Compass
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prompt_injection.py # üõ°Ô∏è Prompt Injection
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sensitive_info.py   # ü§´ Sensitive Info
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ guardrail_manager.py# üö¶ Guardrail Checks
‚îú‚îÄ‚îÄ pyproject.toml              # üì¶ Dependencies
‚îú‚îÄ‚îÄ main.py                     # üöÄ Entry Point
‚îî‚îÄ‚îÄ README.md                   # üïÆ You are here!
```

---

### Core Principles

1Ô∏è‚É£ **Agent Specialization**  
At the heart of Analyst Robot are highly specialized agents. The `PlannerAgent` acts as the conductor, interpreting user requests and devising a strategic plan. It then delegates tasks to `SpecializeAgent`s, such as:
- **BusinessModelAnalyst:** Dissects business models, revenue streams, and market positioning.
- **FinancialStrengthAnalyst:** Scrutinizes financial health, ratios, and stability.

2Ô∏è‚É£ **Dynamic Workflow Orchestration (LangGraph)**  
Forget static scripts! Analyst Robot uses `LangGraph` to build and execute dynamic workflows.
- The `GraphBuilder` constructs a stateful graph where each `Node` represents a specific action (e.g., run an agent, search the web, process data).
- `GraphState` ensures information flows smoothly between nodes, allowing for complex, multi-step reasoning.
- This graph-based approach allows for conditional logic, retries, and parallel execution, making the analysis robust and adaptable.

3Ô∏è‚É£ **Data-Driven Insights (Tools)**  
Agents are empowered by a suite of `Tools`:
- `SearchTools` (leveraging Serper API) provide access to real-time web data, ensuring analyses are current and comprehensive.
- `WebLoaderTools` fetch and prepare online content for agent consumption.

4Ô∏è‚É£ **Robust Foundation (Utils & Guardrails)**  
- `ConfigManager` securely handles sensitive information like API keys.
- Comprehensive logging (`GraphLogger`, `Logger`) provides transparency and aids in debugging.
- The `Guardrails` system aims to ensure ethical, unbiased, and responsible AI outputs.

> This architecture allows Analyst Robot to tackle complex analytical challenges with a level of depth and dynamism previously unattainable. It's not just about processing data; it's about generating genuine understanding.

---

## üî¨ Technical Deep Dive: How the Magic Happens üõ†Ô∏è

Analyst Robot's power stems from a carefully crafted architecture, blending specialized AI agents with a dynamic workflow engine. (Refer to the [System Architecture](#system-architecture) diagram for a visual map!)

### The Agentic Powerhouse

The core of Analyst Robot is its multi-agent system, primarily managed within the `src/agents/` directory:
- **`PlannerAgent` (The Conductor)**: This crucial agent, located in `planner_agent.py`, receives the user's request. It then formulates a strategic plan, deciding which specialized agents are needed and in what order they should run. Think of it as the project manager for the AI team.
- **`SpecializeAgent`s (The Experts)**: Housed in `src/agents/specialize_agent/`, these are the domain gurus. Examples include:
    - *BusinessModelAnalyst*: Focuses on understanding a company's operational strategy, revenue generation, and market positioning.
    - *FinancialStrengthAnalyst*: Dives into financial statements, calculating key ratios and assessing overall fiscal health.
    Each agent leverages LangChain for its core logic, equipped with custom-engineered prompts tailored for its specific analytical tasks. The `agents/registry.py` helps in managing and accessing these specialized agents.

### Dynamic Workflow Orchestration with LangGraph

Static, predefined workflows are too limiting for complex analysis. That's where LangGraph, managed in `src/graph_nodes/`, shines:
- **`GraphBuilder` (`graph_builder.py`)**: This module is responsible for constructing the actual execution graph. Based on the `PlannerAgent`'s strategy, it dynamically assembles a series of `Nodes` (from `src/graph_nodes/nodes/`).
- **`GraphState` (`graph_state.py`)**: This defines the shared "memory" or state that is passed between nodes in the graph. It allows information, partial results, and context to flow seamlessly through the analysis pipeline.
- **Nodes**: Each node in the graph represents a specific task ‚Äì invoking an agent, calling a tool (like web search), processing data, or making a decision. This modularity allows for incredible flexibility and the ability to create sophisticated, multi-step reasoning chains.

### Empowering Tools & Utilities

- **Real-Time Data Acquisition (`src/tools/`)**:
    - `search_tools.py`: Integrates with the Serper API, providing agents with the ability to perform real-time web searches for the most up-to-date information.
    - `web_loader_tools.py`: Fetches and preprocesses content from URLs, making it ready for agent analysis.
- **Robust Foundation (`src/utils/`)**:
    - `config_manager.py`: Securely manages API keys (OpenAI, Serper) and other configurations.
    - `logger.py` & `graph_logger.py`: Provide comprehensive logging. `graph_logger.py` is particularly vital, offering detailed insights into the execution of each node and the overall state of the LangGraph workflow, which is invaluable for debugging and understanding the system's behavior (this logs to `graph_execution_details.log`).

### Key Technologies Fueling the Robot

- **üß† OpenAI (GPT models)**: The powerhouse behind the agents' reasoning, understanding, and generation capabilities.
- **üîó LangChain**: The foundational framework for building agents, managing prompts, and structuring interactions with LLMs.
- **üìà LangGraph**: The engine for orchestrating the complex, stateful, multi-agent workflows.
- **üåê Serper API**: The gateway to real-time web search, keeping analyses fresh and relevant.
- **üîí Python 3.10+ with Full Type Hinting**: Ensures code clarity, robustness, and easier maintenance.
- **üõ°Ô∏è spaCy**: Utilized for NLP tasks, potentially within the `guardrails` system for content analysis or PII detection.


---

## üõ°Ô∏è Logging & Guardrails: Transparency and Responsibility üìä

Understanding what the Analyst Robot is doing and ensuring it operates responsibly are paramount.

---

### üìã Comprehensive Logging

- **General System Logs (`src/utils/logger.py`)**: Captures broad operational information, errors, and system events.
- **Detailed Graph Execution Logs (`src/utils/graph_logger.py`)**: This is where the magic of the workflow becomes transparent! This module provides meticulous JSON Lines logs (`graph_execution_details.log`) for each graph run. It records:
    - A unique `run_id` for each analysis.
    - The state *before* and *after* each node in the LangGraph executes.
    - The outputs or errors generated by each node.
    - Graph start and end times.
    This granular logging is indispensable for debugging, performance analysis, and auditing the decision-making process of the AI.

### Ethical Guardrails (`src/guardrails/`): Building Trust & Safety

Analyst Robot is engineered with a strong commitment to responsible AI. The `src/guardrails/` directory houses critical components designed to ensure safe and ethical operation, managed by the `guardrail_manager.py`:

- **üõ°Ô∏è Prompt Injection Defense (`prompt_injection.py`)**: Actively works to detect and neutralize attempts to manipulate the LLM's behavior through malicious inputs. This helps maintain the integrity and intended focus of the analysis.
- **ü§´ Sensitive Information (PII) Detection & Redaction (`sensitive_info.py`)**: Scans inputs and potential outputs for Personally Identifiable Information (PII) and other sensitive data. Detected information can be flagged or redacted to protect user privacy and comply with data protection standards. (Leverages spaCy for some NLP-based detection).

**Ongoing Development & Future Goals:**
While the current guardrails provide a strong foundation, we are continuously working to enhance them. Future aspirations include more sophisticated mechanisms for:
- **Bias Mitigation**: Developing techniques to identify and reduce potential biases in analytical outputs.
- **Content Moderation**: Expanding checks to prevent the generation of inappropriate or harmful content beyond PII and prompt injections.
- **Factual Accuracy Enhancement**: Implementing more robust cross-referencing and validation techniques.

Building trust and ensuring the reliability of AI-generated insights is a top priority.

## Development Practices

- **Type Safety**: Comprehensive type annotations throughout the codebase
- **Error Handling**: Robust error management for API calls and agent execution
- **Logging**: Detailed logging for debugging and monitoring
- **Modular Design**: Clean separation of concerns between agents, tools, and workflow

## Future Enhancements
- Specialized AI for Guidance Analysis and Narrative Generation (ongoing)
- Add guardrails for ethical and responsible AI use (e.g., bias mitigation, data privacy, content moderation) (ongoing)
- Integration with financial data APIs for direct access to company filings
- Expanded agent capabilities for technical analysis and competitive intelligence
- Interactive visualization of financial metrics and business insights
- Containerization for easy deployment and scaling


---

## üöÄ Getting Started

### üõ†Ô∏è Prerequisites

- Python 3.10+
- OpenAI API key
- Serper API key for web search capabilities

### ‚öôÔ∏è Installation

1Ô∏è‚É£ Ensure you have Python 3.10+ and [uv](https://github.com/astral-sh/uv) installed:
   ```bash
   pip install uv
   ```

2Ô∏è‚É£ Install project dependencies using `uv`:
   ```bash
   uv pip install -r pyproject.toml
   ```

3Ô∏è‚É£ (Recommended) Create and activate a virtual environment:
   ```bash
   uv venv .venv
   source .venv/bin/activate
   uv pip install -r pyproject.toml
   ```

4Ô∏è‚É£ Download the required spaCy language model:
   ```bash
   python -m spacy download en_core_web_sm
   ```

---

## üìÑ License

This project is licensed under the MIT License - see the LICENSE file for details.

---

*Developed by Pawarison Tanyu - A demonstration of advanced AI system design, LLM orchestration, and financial analysis capabilities.*